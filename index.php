<!DOCTYPE html>
<html lang="es" data-bs-theme="light">

<head>
  <meta charset="UTF-8">

  <!-- Meta tags -->
  <title>CuVaRents | Renta de casas en Cuba</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CuVaRents ofrece una amplia selección de propiedades en renta en toda Cuba. Encuentra el hogar ideal en La Habana, Santiago de Cuba, Matanzas y más.">
  <meta property="og:description" content="CuVaRents ofrece una amplia selección de propiedades en alquiler en toda Cuba. Encuentra tu hogar ideal en La Habana, Santiago de Cuba, Matanzas y más.">
  <meta property="og:url" content="https://www.cuvarents.com/">
  <meta property="og:image" content="https://www.cuvarents.com/assets/img/logos/logo_qvarents.svg">
  <meta property="og:type" content="website">
  <meta property="og:title" content="CuVaRents | Alquileres en Cuba">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="CuVaRents | Alquileres en Cuba">
  <meta name="twitter:description" content="CuVaRents ofrece una amplia selección de propiedades en alquiler en toda Cuba. Encuentra tu hogar ideal en La Habana, Santiago de Cuba, Matanzas y más. Desarrollado por Uixsoftware.">
  <meta name="twitter:image" content="https://www.cuvarents.com/assets/img/logos/logo_qvarents.svg">

  <!-- Favicon -->
  <link rel="icon" href="/uixsoftware/assets/img/favicon-32x32.png" type="image/png">

  <!-- Theme switcher (color modes) -->
  <script src="uixsoftware/assets/js/theme-switcher.js"></script>

  <!-- Preloaded local web font (Inter) -->
  <link href="uixsoftware/assets/fonts/inter-variable-latin.woff2" as="font" type="font/woff2" crossorigin="">

  <!-- Font icons -->
  <link rel="stylesheet" href="uixsoftware/assets/css/finder-icons.min.css">
  <link href="uixsoftware/assets/fonts/finder-icons.woff2" as="font" type="font/woff2" crossorigin="">

  <!-- Vendor styles -->
  <link rel="stylesheet" href="uixsoftware/assets/css/swiper-bundle.min.css">
  <link rel="stylesheet" href="uixsoftware/assets/css/glightbox.min.css">
  <link rel="stylesheet" href="uixsoftware/assets/css/choices.min.css">
  <link rel="stylesheet" href="uixsoftware/assets/css/nouislider.min.css">
  <!-- Bootstrap + Theme styles -->
  <link rel="preload" href="uixsoftware/assets/css/theme.min.css" as="style">

  <link rel="stylesheet" href="uixsoftware/assets/css/theme.min.css" id="theme-styles">

  <style id="customizer-styles">
    :root,
    [data-bs-theme="light"] {}

    [data-bs-theme="dark"] {}

    .btn-primary {}

    .btn-success {}

    .btn-warning {}

    .btn-danger {}

    .btn-info {}

    .btn-outline-primary {}

    .btn-outline-success {}

    .btn-outline-warning {}

    .btn-outline-danger {}

    .btn-outline-info {}
  </style>
</head>


<!-- Body -->

<body>

  <?php include 'navbar.php'; ?>


  <!-- Page content -->
  <main class="">

    <!-- Hero with search form -->
    <section class="position-relative mt-md-5 d-none d-md-block">
      <div class="container position-relative z-1 pt-5 pt-md-4 pt-xl-5">
        <div class="row pt-lg-3 pt-xl-0 pt-xxl-4 pb-4 pb-md-5 pb-xl-0">
          <div class="col-md-6 col-xxl-5 text-center text-md-start">
            <h1 class="display-5 pb-sm-1 pb-lg-3 black-ops-one-regular" style="    font-size: 54px !important;">Renta de casas y hospedaje en Cuba</h1>
          </div>
        </div>
        <div class="d-none d-md-block d-lg-none" style="height: 70px"></div>
        <div class="d-none d-lg-block d-xl-none" style="height: 130px"></div>
        <div class="d-none d-xl-block" style="height: 390px"></div>

        <!-- Search form -->
        <div class="row pb-5 pb-md-0">
          <div class="col-xl-10 col-xxl-9">

          </div>
        </div>
        <div class="d-none d-md-block d-lg-none" style="height: 60px"></div>
        <div class="d-none d-lg-block d-xxl-none" style="height: 90px"></div>
        <div class="d-none d-xxl-block" style="height: 130px"></div>
      </div>

      <!-- Background images -->
      <span class="position-absolute top-0 start-0 w-100 h-100 bg-body-tertiary d-md-none"></span>
      <div class="position-absolute top-0 start-0 w-100 h-100 overflow-hidden mt-xxl-4 d-none d-md-block">
        <div class="position-absolute top-0 start-50 translate-middle-x d-flex gap-4" style="width: 1560px">
          <div style="width: 768px">
            <div class="d-xl-none" style="height: 295px"></div>
            <div class="d-none d-xl-block d-xxl-none" style="height: 326px"></div>
            <div class="d-none d-xxl-block" style="height: 366px"></div>
            <div class="position-relative overflow-hidden">
              <div class="position-absolute top-0 z-1 fw-bold" style="right: 0; margin: -75px 96px 0px 0; margin-top: 10px; font-size: 108px; color: var(--fn-body-bg)">Confort</div>
              <div class="ratio bg-body-tertiary rounded overflow-hidden" style="--fn-aspect-ratio: calc(328 / 568 * 100%)">
                <img src="uixsoftware/assets/img/hero3.jpg" loading="lazy" alt="Sala pintada de blanco con muebles blancos mostrando confort y elegancia">
              </div>
            </div>
          </div>

          <div style="width: 508px;">
            <div style="height: 117px"></div>
            <div class="position-relative overflow-hidden">
              <div class="position-absolute top-0 z-1 fw-bold" style="left: 0; margin: -53px 0 0 -18px; font-size: 108px; color: var(--fn-body-bg)">Cuba</div>
              <div class="ratio bg-body-tertiary rounded overflow-hidden" style="--fn-aspect-ratio: calc(446 / 438 * 100%)">
                <img src="uixsoftware/assets/img/hero2.jpg" loading="lazy" alt="Vista de una casa con piscina con un rancho de fondo">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="bg-info d-block d-md-none" style="background-image: url('uixsoftware/assets/img/herox.jpg');background-size: cover;">
      <div class="container pt-5">
        <div class="text-center pt-5 pb-3" style="margin-top: -80px;">
          <span class="display-4 mb-2 text-white black-ops-one-regular" style="text-shadow: 0 0 10px #393939;">CuVaRents</span>
          <br>
          <span class="display-6 text-white  pb-2 black-ops-one-regular" style="text-shadow: 0 0 10px #393939;">Renta de casas y hospedaje en Cuba</span>
          <?php include 'inputsearch.php'; ?>
        </div>
      </div>
    </section>


    <style>
      .gradient-overlay {
        background-image: linear-gradient(to right, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
        position: relative;
      }

      .gradient-overlay::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        border-radius: 12px;
        height: 100%;
        z-index: 1;
        background: linear-gradient(to right, rgba(66, 66, 66, 0.75), rgba(0, 0, 0, 0));
      }

      .card-body {
        position: relative;
        z-index: 2;
      }
    </style>


    <section>
      <div class="container mt-4 pt-5">

        <div class="row g-4">
          <div class="col-12">
            <p class="h3">Elige una categoría para ver casas relacionadas</p>
          </div>
          <div class="col-12 col-md-6">
            <a class="card txn gradient-overlay border-0" href="rents/casas-de-lujo" style="border-radius:12px; background-image: url('uixsoftware/assets/img/1.jpg'); background-position-x: right; background-position-y: center;background-size: cover;">
              <div class="card-body p-3 p-md-5">
                <span class="h4 text-white">Casas de lujo</span>
                <br>
                <button class="btnx mt-2 p-0" style="width: 40px; height:40px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M5 12l14 0" />
                    <path d="M15 16l4 -4" />
                    <path d="M15 8l4 4" />
                  </svg></button>
              </div>
            </a>
          </div>

          <div class="col-12 col-md-6">
            <a class="card txn gradient-overlay border-0" href="rents/Casas-en-la-playa" style="border-radius:12px; background-image: url('uixsoftware/assets/img/2.jpg'); background-position-x: right; background-position-y: center;background-size: cover;">
              <div class="card-body p-3 p-md-5">
                <span class="h4 text-white">Casas en la playa</span>
                <br>
                <button class="btnx mt-2 p-0" style="width: 40px; height:40px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M5 12l14 0" />
                    <path d="M15 16l4 -4" />
                    <path d="M15 8l4 4" />
                  </svg></button>
              </div>
            </a>
          </div>

          <div class="col-12 col-md-6">
            <a class="card txn gradient-overlay border-0" href="rents/Casas-y-Apartamentos-por-largas-y-cortas-estancias" style="border-radius:12px; background-image: url('uixsoftware/assets/img/3.jpg'); background-position-x: right; background-position-y: center;background-size: cover;">
              <div class="card-body p-3 p-md-5">
                <span class="h4 text-white">Casas y Apartamentos por largas y cortas estancias</span>
                <br>
                <button class="btnx mt-2 p-0" style="width: 40px; height:40px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M5 12l14 0" />
                    <path d="M15 16l4 -4" />
                    <path d="M15 8l4 4" />
                  </svg></button>
              </div>
            </a>
          </div>

          <div class="col-12 col-md-6">
            <a class="card txn gradient-overlay border-0 h-100" href="rents/Casas-y-Alojamientos-vacacionales" style="border-radius:12px; background-image: url('uixsoftware/assets/img/4.jpg'); background-position-x: right; background-position-y: center;background-size: cover;">
              <div class="card-body p-3 p-md-5">
                <span class="h4 text-white">Casas y Alojamientos vacacionales</span>
                <br>
                <button class="btnx mt-2 p-0" style="width: 40px; height:40px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M5 12l14 0" />
                    <path d="M15 16l4 -4" />
                    <path d="M15 8l4 4" />
                  </svg></button>
              </div>
            </a>
          </div>

        </div>
      </div>
    </section>






    <section class="mt-6 pt-5 pb-5">
      <div>
      </div>
    </section>
    <!-- Property listings -->


    <?php
    // Función para convertir texto a slug (coincide con las reglas de .htaccess)
    function slugify($text)
    {
      $text = strtolower(trim($text));
      $text = preg_replace('/[^a-z0-9]+/i', '-', $text);
      return trim($text, '-');
    }

    $categories = [
      "Casas de lujo",
      "Casas en la playa",
      "Casas y Apartamentos por largas y cortas estancias",
      "Casas y Alojamientos vacacionales"
    ];

    foreach ($categories as $category) {
      // Consulta para obtener las rentas de la categoría actual, excluyendo las ocultas y limitando a 4 resultados
      $sql3 = "SELECT Rentals.*, GROUP_CONCAT(RentalImages.image_url) AS images 
          FROM Rentals
          LEFT JOIN RentalImages ON Rentals.rental_id = RentalImages.rental_id
          WHERE Rentals.is_hidden = FALSE AND Rentals.rental_category = ?
          GROUP BY Rentals.rental_id
          ORDER BY Rentals.is_promoted DESC, Rentals.rental_id DESC
          LIMIT 4";

      $stmt = $conn->prepare($sql3);
      $stmt->bind_param("s", $category);
      $stmt->execute();
      $result = $stmt->get_result();

      if ($result->num_rows > 0) {
        echo "
      <section class=\"container pb-5\">
          <h2 class=\"h4 pb-4\">$category</h2>

          <!-- Properties grid -->
          <div class=\"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 g-md-3 g-lg-4\">";

        while ($row = $result->fetch_assoc()) {
          $rentalId = $row['rental_id'];
          $images = !empty($row['images']) ? explode(',', $row['images']) : [];
          $firstImage = !empty($images[0]) ? 'uploads/' . $images[0] : 'uixsoftware/assets/img/default-img.png';
          $rentalTitle = htmlspecialchars($row['rental_title'], ENT_QUOTES, 'UTF-8');
          $rentalPrice = htmlspecialchars($row['rental_price'], ENT_QUOTES, 'UTF-8');
          $rentalHab = htmlspecialchars($row['rental_rooms'], ENT_QUOTES, 'UTF-8');
          $rentalPriceType = htmlspecialchars($row['rental_price_type'], ENT_QUOTES, 'UTF-8');
          $rentalLocation = htmlspecialchars($row['rental_provincia'] . ', ' . $row['rental_municipio'], ENT_QUOTES, 'UTF-8');
          $rentalCreated = date('d/m/Y', strtotime($row['rental_created_at']));
          $rentalEdited = date('d/m/Y', strtotime($row['rental_updated_at']));
          $isPromoted = $row['is_promoted'];

          // Obtener los servicios de la renta
          $sqlServices = "SELECT services_rent_name, services_rent_icon_svg FROM services_rent
                          JOIN RentalServices ON services_rent.services_rent_id = RentalServices.service_rent_id
                          WHERE RentalServices.rental_id = ?";
          $stmtServices = $conn->prepare($sqlServices);
          $stmtServices->bind_param("i", $rentalId);
          $stmtServices->execute();
          $resultServices = $stmtServices->get_result();

          $servicesIcons = "";
          $totalServices = $resultServices->num_rows;
          $count = 0;

          while ($service = $resultServices->fetch_assoc()) {
            if ($count < 5) {
              $servicesIcons .= $service['services_rent_icon_svg'];
            }
            $count++;
          }

          if ($totalServices > 5) {
            $servicesIcons .= '<span class="fs-sm ms-2">+' . ($totalServices - 5) . '</span>';
          }

          // Generar las slides del Swiper
          $slides = "";
          $imageCount = 0;
          if (empty($images)) {
            // Si no hay imágenes, agregar 1 slide con la imagen por defecto
            $slides .= "
    <div class=\"swiper-slide\">
        <div class=\"ratio d-block\" style=\"--fn-aspect-ratio: calc(248 / 362 * 100%)\">
            <img src=\"uixsoftware/assets/img/default-img.png\" loading=\"lazy\" alt=\"ícono de casa gris como marcador por defecto de una propiedad en alquiler sin fotos disponibles\">
            <span class=\"position-absolute top-0 start-0 w-100 h-100 z-1\" style=\"background: linear-gradient(180deg, rgba(0,0,0, 0) 0%, rgba(0,0,0, .11) 100%)\"></span>
        </div>
    </div>";
          } else {
            foreach ($images as $index => $image) {
              if ($imageCount >= 4) break;
              $slideImage = !empty($image) ? 'uploads/' . $image : 'uixsoftware/assets/img/default-img.png';
              $slides .= "
        <div class=\"swiper-slide\" role=\"group\" aria-label=\"" . ($index + 1) . " / " . count($images) . "\" style=\"width: 304px;\">
            <div class=\"ratio d-block\" style=\"--fn-aspect-ratio: calc(248 / 362 * 100%)\">
                <img src=\"./dashboard/$slideImage\" loading=\"lazy\" alt=\"Imagen " . ($index + 1) . " de $rentalTitle\">
                <span class=\"position-absolute top-0 start-0 w-100 h-100 z-1\" style=\"background: linear-gradient(180deg, rgba(0,0,0, 0) 0%, rgba(0,0,0, .11) 100%)\"></span>
            </div>
        </div>";
              $imageCount++;
            }
          }

          echo "
          <div class=\"col\">
              <article class=\"card hover-effect-opacity h-100\">
                  <div class=\"card-img-top position-relative bg-body-tertiary overflow-hidden\">
                      <div class=\"swiper z-2\" data-swiper='{\"pagination\": {\"el\": \".swiper-pagination\"}, \"navigation\": {\"prevEl\": \".btn-prev\", \"nextEl\": \".btn-next\"}, \"breakpoints\": {\"991\": {\"allowTouchMove\": false}}}'>
                          <a class=\"swiper-wrapper\" href=\"/web-cuvarents/single/$rentalId\" aria-live=\"polite\">
                              $slides
                          </a>
                          <div class=\"swiper-pagination bottom-0 mb-2\"></div>
                      </div>
                  </div>
                  <div class=\"card-body p-3\">
                      <div class=\"pb-1 mb-2\">
                          <span class=\"badge text-body-emphasis bg-body-secondary\">$rentalLocation</span>
                          " . ($isPromoted ? "<span class=\"badge bg-warning ms-2\">VIP</span>" : "") . "
                          <span class='ms-2'>
                         $rentalHab
                          <svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round' class='icon icon-tabler icons-tabler-outline icon-tabler-bed'>
  <path stroke='none' d='M0 0h24v24H0z' fill='none'></path>
  <path d='M7 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0'></path>
  <path d='M22 17v-3h-20'></path>
  <path d='M2 8v9'></path>
  <path d='M12 14h10v-2a3 3 0 0 0 -3 -3h-7v5z'></path>
</svg>
                          </span>
                      </div>
                      <div class=\"h5 mb-2\">\$$rentalPrice <span class=\"fs-sm text-muted\">($rentalPriceType)</span></div>
                      <div class=\"h6 fs-sm mb-0 mt-3\">Servicios</div>
                  </div>
                  <div class=\"card-footer d-flex gap-2 border-0 bg-transparent pt-0 pb-3 px-3 mt-n1\">
                      $servicesIcons
                  </div>
              </article>
          </div>";
        }

        echo "
          </div>
          <div class=\"d-flex pt-5\">
              <a href=\"/web-cuvarents/rents/" . slugify($category) . "\" class=\"btn btn-outline-secondary\">Ver más alquileres de esta categoría</a>
          </div>
      </section>";
      }

      $stmt->close();
    }
    ?>





    <?php include 'testimonialComponent.php'; ?>


  </main>


  <?php include 'footer.php'; ?>



  <!-- Vendor scripts -->
  <script src="uixsoftware/assets/js/swiper-bundle.min.js"></script>
  <script src="uixsoftware/assets/js/glightbox.min.js"></script>
  <script src="uixsoftware/assets/js/choices.min.js"></script>
  <script src="uixsoftware/assets/js/nouislider.min.js"></script>

  <!-- Bootstrap + Theme scripts -->
  <script src="uixsoftware/assets/js/theme.min.js"></script>


</body>

</html>